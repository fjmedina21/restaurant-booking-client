"use strict";(self.webpackChunkRestaurantBooking=self.webpackChunkRestaurantBooking||[]).push([[658],{1658:(Y,h,i)=>{i.r(h),i.d(h,{TableModule:()=>Q});var g=i(6814),C=i(1896),d=i(9397),u=i(2181),P=i(4664),v=i(6306),x=i(2096),Z=i(1075),m=i(79),c=i(6223),p=i(7700),t=i(5879),T=i(2638),M=i(5860),_=i(2296),l=i(5195),O=i(9157),y=i(2032);function A(n,r){1&n&&(t.ynx(0),t._UZ(1,"shared-loading-spinner"),t.BQk())}function L(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",1),t.YNc(1,A,2,0,"ng-container",2),t.TgZ(2,"mat-card-content")(3,"form",3),t.ynx(4),t.TgZ(5,"mat-form-field")(6,"mat-label"),t._uU(7,"Name"),t.qZA(),t._UZ(8,"input",4),t.qZA(),t.TgZ(9,"mat-form-field")(10,"mat-label"),t._uU(11,"Capacity"),t.qZA(),t._UZ(12,"input",5),t.qZA(),t.BQk(),t.qZA(),t._uU(13," \xb4 "),t.ynx(14),t.TgZ(15,"mat-card-actions")(16,"button",6),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.submit())}),t._uU(17," Save "),t.qZA()(),t.BQk(),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading),t.xp6(2),t.Q6J("formGroup",e.tableForm),t.xp6(13),t.Q6J("disabled",e.disableBtn)}}let w=(()=>{var n;class r{constructor(a,o,s,b,R){this.dialog=a,this.fb=o,this.tableService=s,this.refDialog=b,this.data=R,this.disableBtn=!1,this.isLoading=!1,this.tableForm=this.fb.group({name:[,c.kI.required],capacity:[c.kI.required,c.kI.min(1)]})}ngOnInit(){}submit(){if(!this.tableForm.valid)return this.dialog.open(m.q,{data:{title:"Invalid Form",message:""}}).afterClosed().subscribe(),void this.tableForm.markAllAsTouched();this.isLoading=!0,this.disableBtn=!0,this.tableService.create(this.tableForm.value).pipe((0,v.K)(({error:a})=>(this.dialog.open(m.q,{data:{title:"Failed",message:a.message}}).afterClosed().subscribe(),this.isLoading=!1,(0,x.of)()))).subscribe(()=>{this.isLoading=!1,this.disableBtn=!1,this.refDialog.close(!0)})}}return(n=r).\u0275fac=function(a){return new(a||n)(t.Y36(p.uw),t.Y36(c.qu),t.Y36(T.w),t.Y36(p.so),t.Y36(p.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["add-table"]],decls:1,vars:1,consts:[["class","mat-card",4,"ngIf"],[1,"mat-card"],[4,"ngIf"],[3,"formGroup"],["matInput","","type","text","placeholder","Table 1","formControlName","name"],["type","number","matInput","","formControlName","capacity"],["mat-raised-button","","type","submit",1,"btn",3,"disabled","click"]],template:function(a,o){1&a&&t.YNc(0,L,18,3,"mat-card",0),2&a&&t.Q6J("ngIf",!o.isLoading)},dependencies:[g.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,M.g,_.lW,l.a8,l.hq,l.dn,O.KE,O.hX,y.Nt],styles:[".mat-card[_ngcontent-%COMP%]{width:100%;margin:auto;border-radius:8px}.mat-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;background-color:#34495e;color:#f5f5f5}.mat-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#22303d}"]}),r})();var f=i(623);function I(n,r){1&n&&(t.ynx(0),t._UZ(1,"shared-loading-spinner"),t.BQk())}function S(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"ejs-datetimepicker",6),t.NdJ("valueChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.reservationStart=o)}),t.qZA()(),t.TgZ(4,"div",5)(5,"ejs-datetimepicker",6),t.NdJ("valueChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.reservationEnd=o)}),t.qZA()()(),t.TgZ(6,"div",7)(7,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.getAvailableTables())}),t._uU(8," Get Available Tables "),t.qZA(),t.TgZ(9,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addTable())}),t._uU(10,"Add Table"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("min",e.minDate)("value",e.reservationStart),t.xp6(2),t.Q6J("min",e.minDate)("value",e.reservationEnd)}}function J(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",12)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Table Details"),t.qZA(),t.TgZ(4,"mat-card-subtitle",13),t._uU(5),t.qZA()(),t.TgZ(6,"mat-card-content")(7,"h3"),t._uU(8,"Table Info"),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Table:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p")(14,"strong"),t._uU(15,"Capacity:"),t.qZA(),t._uU(16),t.qZA()(),t.TgZ(17,"mat-card-actions")(18,"button",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,b=t.oxw(2);return t.KtG(b.deleteTable(s.tableId))}),t._uU(19,"Delete"),t.qZA(),t.TgZ(20,"button",15),t._uU(21,"Update"),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(5),t.hij(" ",e.name," "),t.xp6(7),t.hij(" ",e.name,""),t.xp6(4),t.hij(" ",e.capacity,"")}}function U(n,r){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,J,22,3,"mat-card",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tables)}}let F=(()=>{var n;class r{constructor(a,o){this.tableService=a,this.dialog=o,this.isLoading=!1,this.minDate=(new Date).toISOString().split("T")[0],this.reservationEnd=this.reservationStart}ngOnInit(){this.loadData()}loadData(){this.isLoading=!0,this.tableService.getALl().pipe((0,d.b)(a=>this.tables=a)).subscribe(()=>this.isLoading=!1)}addTable(){this.dialog.open(w).afterClosed().pipe((0,u.h)(o=>o),(0,d.b)(o=>{o&&this.loadData()})).subscribe()}getAvailableTables(){this.reservationStart?(this.reservationStart.setMinutes(this.reservationStart.getMinutes()-this.reservationStart.getTimezoneOffset()),this.reservationEnd.setMinutes(this.reservationEnd.getMinutes()-this.reservationEnd.getTimezoneOffset()),this.isLoading=!0,this.tableService.getAvailable(this.reservationStart.toISOString(),this.reservationEnd.toISOString()).pipe((0,d.b)(a=>this.tables=a)).subscribe(()=>{this.isLoading=!1})):this.dialog.open(m.q,{data:{title:"Date and Time Required",message:"Please select a date and time"}})}deleteTable(a){this.dialog.open(Z.$,{disableClose:!0,data:{title:"Delete",message:"Are you sure?"}}).afterClosed().pipe((0,u.h)(s=>s),(0,d.b)(s=>{s&&(this.isLoading=!0)}),(0,P.w)(()=>this.tableService.delete(a).pipe((0,v.K)(({error:s})=>(this.dialog.open(m.q,{data:{title:"Failed",message:`${s.message??"Something happend!!"}`}}),this.isLoading=!1,(0,x.of)())))),(0,u.h)(s=>s),(0,d.b)(s=>{s&&this.loadData()})).subscribe()}}return(n=r).\u0275fac=function(a){return new(a||n)(t.Y36(T.w),t.Y36(p.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["list-tables"]],decls:3,vars:3,consts:[[4,"ngIf"],["class","container",4,"ngIf"],["class","table-card-container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col","custom-col"],["placeholder","Choose a date and time","format","dd/MMM/yyyy hh:mm a",1,"customWidth",3,"min","value","valueChange"],[1,"row","button-row"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"table-card-container"],["class","table-card",4,"ngFor","ngForOf"],[1,"table-card"],[1,"highlighted-subtitle"],["mat-button","",3,"click"],["mat-button","","disabled",""]],template:function(a,o){1&a&&(t.YNc(0,I,2,0,"ng-container",0),t.YNc(1,S,11,4,"div",1),t.YNc(2,U,2,1,"div",2)),2&a&&(t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading))},dependencies:[g.sg,g.O5,M.g,_.lW,l.a8,l.hq,l.dn,l.dk,l.$j,l.n5,f.JX],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1,1fr;gap:16px;margin:16px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center;width:100%}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .customWidth[_ngcontent-%COMP%]{flex:1 1 45%}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1 1 45%;padding:10px 15px;font-size:16px;font-weight:700;border-radius:5px;border:none;cursor:pointer;transition:background-color .3s,transform .2s;background-color:#00796b;color:#f5f5f5;text-align:center}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#049d8b}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.container[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;width:100%;justify-content:space-between}.container[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1 1 48%}.table-card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin:16px}@media (max-width: 768px){.table-card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.table-card-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}.table-card[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:8px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column;justify-content:space-between;transition:transform .2s}.table-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background-color:#00796b;color:#fff;padding:16px;border-top-left-radius:8px;border-top-right-radius:8px}.table-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .highlighted-subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#fff}.table-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700}.table-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}.table-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;margin-top:0;color:#00796b}.table-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.9rem}.table-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:16px;border-top:1px solid #e0e0e0}.table-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}"]}),r})();const N=[{path:"",component:i(4178).o,children:[{path:"",component:F},{path:"**",redirectTo:"/"}]}];let j=(()=>{var n;class r{}return(n=r).\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.Bz.forChild(N),C.Bz]}),r})();var B=i(2977),D=i(5576);let Q=(()=>{var n;class r{}return(n=r).\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[f._x],imports:[g.ez,j,c.UX,D.m,B.q,c.u5,f.If]}),r})()}}]);